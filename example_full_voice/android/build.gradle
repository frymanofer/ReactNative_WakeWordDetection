buildscript {
  ext {
    buildToolsVersion = "34.0.0"
    minSdkVersion = 29
    compileSdkVersion = 34
    targetSdkVersion = 34
    ndkVersion = "28.2.13676358"
    kotlinVersion = "2.1.20"          // ← bump to 2.1.20
    agpVersion = "8.6.1"
  }
  repositories { google(); mavenCentral(); gradlePluginPortal() }
  dependencies {
    classpath("com.android.tools.build:gradle:${agpVersion}")
    classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}")
    // ❌ DO NOT add: com.facebook.react:react-native-gradle-plugin
  }
}

//apply plugin: "com.facebook.react.rootproject"

allprojects {
  repositories {
    // your custom repos
    maven { url "${project(":react-native-wakeword-sid").projectDir}/libs" }
    maven { url "${project(":react-native-davoice-tts").projectDir}/libs" }

    // background-fetch repos (unchanged)
    maven { url "${project(":react-native-background-fetch").projectDir}/libs" }
    maven { url("${project(':react-native-background-fetch').projectDir}/libs") }
    maven { url("${project(':react-native-background-fetch').projectDir}/libs") }

    // RN + JSC from node_modules
    maven {
      url(new File(['node', '--print', "require.resolve('react-native/package.json')"]
        .execute(null, rootDir).text.trim(), '../android'))
    }
    maven {
      url(new File(['node', '--print', "require.resolve('jsc-android/package.json', { paths: [require.resolve('react-native/package.json')] })"]
        .execute(null, rootDir).text.trim(), '../dist'))
    }

    google()
    mavenCentral()
    maven { url 'https://www.jitpack.io' }
    mavenLocal()
  }
}
